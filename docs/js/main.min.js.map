{"version":3,"sources":["src/js/main.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/rxcomp/dist/cjs/core/factory.js","../../node_modules/rxcomp/dist/cjs/core/directive.js","../../node_modules/rxcomp/dist/cjs/class/class.directive.js","../../node_modules/rxcomp/dist/cjs/event/event.directive.js","../../node_modules/rxcomp/dist/cjs/core/structure.js","../../node_modules/rxcomp/dist/cjs/core/component.js","../../node_modules/rxcomp/dist/cjs/core/context.js","../../node_modules/rxcomp/dist/cjs/for/for.item.js","../../node_modules/rxcomp/dist/cjs/for/for.structure.js","../../node_modules/rxcomp/dist/cjs/href/href.directive.js","../../node_modules/rxcomp/dist/cjs/if/if.structure.js","../../node_modules/rxcomp/dist/cjs/inner-html/inner-html.directive.js","../../node_modules/rxcomp/dist/cjs/core/pipe.js","../../node_modules/rxcomp/dist/cjs/json/json.pipe.js","../../node_modules/rxcomp/dist/cjs/module/module.js","../../node_modules/rxcomp/dist/cjs/src/src.directive.js","../../node_modules/rxcomp/dist/cjs/style/style.directive.js","../../node_modules/rxcomp/dist/cjs/core.module.js","../../node_modules/rxcomp/dist/cjs/platform/platform.js","../../node_modules/rxcomp/dist/cjs/platform/browser.js","../../node_modules/rxcomp/dist/cjs/rxcomp.js","../../src/js/local-storage/local-storage.service.js","../../src/js/store/store.service.js","../../src/js/app.component.js","../../src/js/date/date.pipe.js","../../src/js/colors/colors.js","../../src/js/todo-item/todo-item.component.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["rxjs","operators","rxjs__default","operators__default","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","module","exports","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","__assign","assign","t","s","i","n","arguments","length","apply","this","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","e","ar","push","error","__await","v","tslib_es6","freeze","__extends","__","constructor","create","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","op","pop","__exportStar","__spread","concat","__spreadArrays","il","k","a","j","jl","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","get","__classPrivateFieldSet","set","factory","CONTEXTS","NODES","Factory","args","_i","rxcompId","unsubscribe$","rxjs_1","Subject","changes$","ReplaySubject","onInit","onChanges","changes","onView","onDestroy","pushChanges","getContext","instance","directive","Directive","_super","tslib_1","require$$0","class_directive","ClassDirective","_this","class","keys","node","factory_1","slice","classList","forEach","object","split","setAttribute","join","meta","selector","inputs","event_directive","EventDirective","event","_a","parentInstance","replace","event$","fromEvent","pipe","operators_1","shareReplay","expression","getAttribute","outputFunction_1","makeFunction","takeUntil","subscribe","structure","Structure","component","Component","parse","context","component_1","RESERVED_PROPERTIES","Context","descriptors","mergeDescriptors","getPrototypeOf","defineProperties","source","properties","getOwnPropertyNames","_loop_1","descriptor","for_item","ForItem","$key","$value","index","count","enumerable","configurable","even","for_structure","structure_1","for_item_1","require$$1","ForStructure","instances","forbegin","document","createComment","parentNode","replaceChild","forend","insertBefore","nextSibling","removeAttribute","token","getExpressionToken","forFunction","iterable","isArray","array","total","previous","Math","max","clonedNode","cloneNode","makeInstance","forItemContext","compile","node_1","removeChild","remove","trim","expressions","map","filter","forExpressions","keyValueMatches","match","indexExpressions","href_directive","HrefDirective","href_","href","if_structure","IfStructure","ifbegin","ifend","ifFunction","element","innerHtml_directive","InnerHtmlDirective","innerHTML_","innerHTML","undefined","Pipe","transform","json_pipe","JsonPipe","JSON","stringify","name","context_1","require$$2","require$$3","ID","Module","componentNode","querySelectorsAll","selectors","meta_1","getParentInstance","instance_1","bind","makeContext","makeHosts","makeInputs","outputs","makeOutputs","resolveInputsOutputs","params","parseExpression","Function","payload","childNodes","child","nodeType","getContextByNode","text","parseTextNode","keepInstance","keepContext","traverseDown","deleteContext","destroy","nodeInnerHTML","getInstance","Document","window","traverseUp","nodeExpressions","parseTextNodeExpression","wholeText","replacedText","reduce","nodeValue","textNode","createTextNode","pushFragment","from","to","fragment","substring","matches","regex","lastIndex","exec","hosts","getHost","makeInput","input","hasAttribute","makeOutput","outputFunction","output$","tap","output","inputFunction","rx1","parsePipes","parseOptionalChaining","parsePipeParams","func","segments","word","block","substr","tokens","rxcompNodeId","id","keepContexts","nodeContexts","complete","matchSelectors","results","selectorResult","template","selectorResults","find","callback","traversePrevious","previousSibling","traverseNext","current","src_directive","SrcDirective","src_","src","style_directive","StyleDirective","style","previousStyle","propertyName","splitted","removeProperty","setProperty","core_module","module$1","class_directive_1","event_directive_1","for_structure_1","href_directive_1","if_structure_1","require$$4","inner_html_directive_1","require$$5","json_pipe_1","require$$6","module_1","require$$7","src_directive_1","require$$8","style_directive_1","require$$9","factories","pipes","CoreModule","declarations","platform","directive_1","pipe_1","ORDER","Platform","bootstrap","moduleFactory","resolveMeta","isBrowser","Boolean","querySelector","resolveImportedMeta","resolvePipes","resolveFactories","sortFactories","unshift","unwrapSelectors","imports","exported","importedPipes","importMeta","pipeFactory","importedFactories","factoryList","sort","getExpressions","matchers","c1","a2","u3","v4","a5","e6","contains","nodeName","toLowerCase","excludes","matchSelector","unmatchSelector","includes","included","excluded","browser","Browser","rxcomp","core_module_1","browser_1","platform_1","rxcomp_2","rxcomp_3","rxcomp_7","rxcomp_8","rxcomp_17","rxcomp_20","_inheritsLoose","subClass","superClass","LocalStorageService","delete","isLocalStorageSupported","localStorage","removeItem","exist","console","log","cache","json","setItem","supported","StoreService","items","get$","store$","date","Date","now","BehaviorSubject","delay","add$","patch","item","getValue","of","patch$","delete$","splice","AppComponent","_Component","_proto","onInput","$event","onAddItem","_this2","onToggleItem","onRemoveItem","DatePipe","_Pipe","locale","options","dateStyle","timeStyle","toLocaleDateString","colors","hex","background","foreground","accent","hexToRgb","parseInt","TodoItemComponent","alpha","onToggle","toggle","onRemove","AppModule","_Module"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar rxjs_1 = require(\"rxjs\");\r\nexports.CONTEXTS = {};\r\nexports.NODES = {};\r\nvar Factory = /** @class */ (function () {\r\n    function Factory() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this.rxcompId = -1;\r\n        this.unsubscribe$ = new rxjs_1.Subject();\r\n        this.changes$ = new rxjs_1.ReplaySubject(1);\r\n    }\r\n    Factory.prototype.onInit = function () { };\r\n    Factory.prototype.onChanges = function (changes) { };\r\n    Factory.prototype.onView = function () { };\r\n    Factory.prototype.onDestroy = function () { };\r\n    Factory.prototype.pushChanges = function () {\r\n        this.changes$.next(this);\r\n        this.onView();\r\n    };\r\n    return Factory;\r\n}());\r\nexports.default = Factory;\r\nfunction getContext(instance) {\r\n    return exports.CONTEXTS[instance.rxcompId];\r\n}\r\nexports.getContext = getContext;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar factory_1 = tslib_1.__importDefault(require(\"./factory\"));\r\nvar Directive = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Directive, _super);\r\n    function Directive() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return Directive;\r\n}(factory_1.default));\r\nexports.default = Directive;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\n// import Factory, { ExpressionFunction } from '../core/factory';\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = require(\"../core/factory\");\r\nvar ClassDirective = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ClassDirective, _super);\r\n    function ClassDirective() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.class = '';\r\n        _this.keys = [];\r\n        return _this;\r\n    }\r\n    ClassDirective.prototype.onInit = function () {\r\n        var _this = this;\r\n        var node = factory_1.getContext(this).node;\r\n        Array.prototype.slice.call(node.classList).forEach(function (x) { return _this.keys.push(x); });\r\n    };\r\n    ClassDirective.prototype.onChanges = function () {\r\n        var node = factory_1.getContext(this).node;\r\n        var keys = [];\r\n        var object = this.class;\r\n        if (typeof object === 'object') {\r\n            for (var key in object) {\r\n                if (object[key]) {\r\n                    keys.push(key);\r\n                }\r\n            }\r\n        }\r\n        else if (typeof object === 'string') {\r\n            keys = object.split(/\\s+/);\r\n        }\r\n        keys = keys.concat(this.keys);\r\n        // console.log(keys);\r\n        node.setAttribute('class', keys.join(' '));\r\n        // console.log('ClassDirective.onChanges', keys);\r\n    };\r\n    return ClassDirective;\r\n}(directive_1.default));\r\nexports.default = ClassDirective;\r\nClassDirective.meta = {\r\n    selector: \"[[class]]\",\r\n    inputs: ['class']\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar rxjs_1 = require(\"rxjs\");\r\nvar operators_1 = require(\"rxjs/operators\");\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = require(\"../core/factory\");\r\nvar EVENTS = ['mousedown', 'mouseup', 'mousemove', 'click', 'dblclick', 'mouseover', 'mouseout', 'mouseenter', 'mouseleave', 'contextmenu', 'touchstart', 'touchmove', 'touchend', 'keydown', 'keyup', 'input', 'change', 'loaded'];\r\nvar EventDirective = /** @class */ (function (_super) {\r\n    tslib_1.__extends(EventDirective, _super);\r\n    function EventDirective() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.event = '';\r\n        return _this;\r\n    }\r\n    EventDirective.prototype.onInit = function () {\r\n        var _a = factory_1.getContext(this), module = _a.module, node = _a.node, parentInstance = _a.parentInstance, selector = _a.selector;\r\n        // console.log('parentInstance', parentInstance);\r\n        var event = this.event = selector.replace(/\\[|\\]|\\(|\\)/g, '');\r\n        var event$ = rxjs_1.fromEvent(node, event).pipe(operators_1.shareReplay(1));\r\n        var expression = node.getAttribute(\"(\" + event + \")\");\r\n        if (expression) {\r\n            var outputFunction_1 = module.makeFunction(expression, ['$event']);\r\n            event$.pipe(operators_1.takeUntil(this.unsubscribe$)).subscribe(function (event) {\r\n                module.resolve(outputFunction_1, parentInstance, event);\r\n            });\r\n        }\r\n        else {\r\n            parentInstance[event + \"$\"] = event$;\r\n        }\r\n        // console.log('EventDirective.onInit', 'selector', selector, 'event', event);\r\n    };\r\n    return EventDirective;\r\n}(directive_1.default));\r\nexports.default = EventDirective;\r\nEventDirective.meta = {\r\n    selector: \"[(\" + EVENTS.join(')],[(') + \")]\",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar factory_1 = tslib_1.__importDefault(require(\"./factory\"));\r\nvar Structure = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Structure, _super);\r\n    function Structure() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return Structure;\r\n}(factory_1.default));\r\nexports.default = Structure;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar factory_1 = tslib_1.__importStar(require(\"./factory\"));\r\nvar Component = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Component, _super);\r\n    function Component() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Component.prototype.pushChanges = function () {\r\n        var _a = factory_1.getContext(this), module = _a.module, node = _a.node;\r\n        // console.log(new Error(`pushChanges ${instance.constructor.name}`).stack);\r\n        this.changes$.next(this);\r\n        // console.log('Module.parse', instance.constructor.name);\r\n        // parse component text nodes\r\n        module.parse(node, this);\r\n        // calling onView event\r\n        this.onView();\r\n    };\r\n    return Component;\r\n}(factory_1.default));\r\nexports.default = Component;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\n// import { BehaviorSubject, Subject } from 'rxjs';\r\nvar component_1 = tslib_1.__importDefault(require(\"./component\"));\r\nvar RESERVED_PROPERTIES = ['constructor', 'rxcompId', 'onInit', 'onChanges', 'onDestroy', 'pushChanges', 'changes$', 'unsubscribe$'];\r\nvar Context = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Context, _super);\r\n    function Context(instance, descriptors) {\r\n        if (descriptors === void 0) { descriptors = {}; }\r\n        var _this = _super.call(this) || this;\r\n        descriptors = Context.mergeDescriptors(instance, instance, descriptors);\r\n        descriptors = Context.mergeDescriptors(Object.getPrototypeOf(instance), instance, descriptors);\r\n        Object.defineProperties(_this, descriptors);\r\n        return _this;\r\n    }\r\n    Context.mergeDescriptors = function (source, instance, descriptors) {\r\n        if (descriptors === void 0) { descriptors = {}; }\r\n        var properties = Object.getOwnPropertyNames(source);\r\n        var _loop_1 = function () {\r\n            var key = properties.shift();\r\n            if (RESERVED_PROPERTIES.indexOf(key) === -1 && !descriptors.hasOwnProperty(key)) {\r\n                var descriptor = Object.getOwnPropertyDescriptor(source, key);\r\n                if (typeof descriptor.value == 'function') {\r\n                    descriptor.value = function () {\r\n                        var args = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            args[_i] = arguments[_i];\r\n                        }\r\n                        return instance[key].apply(instance, args);\r\n                    };\r\n                }\r\n                descriptors[key] = descriptor;\r\n            }\r\n        };\r\n        while (properties.length) {\r\n            _loop_1();\r\n        }\r\n        return descriptors;\r\n    };\r\n    return Context;\r\n}(component_1.default));\r\nexports.default = Context;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar context_1 = tslib_1.__importDefault(require(\"../core/context\"));\r\nvar ForItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ForItem, _super);\r\n    // !!! todo: payload options { key, $key, value, $value, index, count }\r\n    function ForItem(key, $key, value, $value, index, count, parentInstance) {\r\n        var _this = \r\n        // console.log('ForItem', arguments);\r\n        _super.call(this, parentInstance) || this;\r\n        /*\r\n        super(parentInstance, {\r\n            [key]: {\r\n                get: function() {\r\n                    return this.$key;\r\n                },\r\n                set: function(key) {\r\n                    this.$key = key;\r\n                }\r\n            },\r\n            [value]: {\r\n                get: function() {\r\n                    return this.$value;\r\n                },\r\n                set: function(value) {\r\n                    this.$value = value;\r\n                }\r\n            }\r\n        });\r\n        */\r\n        _this[key] = $key;\r\n        _this[value] = $value;\r\n        _this.index = index;\r\n        _this.count = count;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ForItem.prototype, \"first\", {\r\n        get: function () { return this.index === 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ForItem.prototype, \"last\", {\r\n        get: function () { return this.index === this.count - 1; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ForItem.prototype, \"even\", {\r\n        get: function () { return this.index % 2 === 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ForItem.prototype, \"odd\", {\r\n        get: function () { return !this.even; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ForItem;\r\n}(context_1.default));\r\nexports.default = ForItem;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar factory_1 = require(\"../core/factory\");\r\nvar structure_1 = tslib_1.__importDefault(require(\"../core/structure\"));\r\nvar for_item_1 = tslib_1.__importDefault(require(\"./for.item\"));\r\nvar ForStructure = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ForStructure, _super);\r\n    function ForStructure() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.instances = [];\r\n        return _this;\r\n    }\r\n    ForStructure.prototype.onInit = function () {\r\n        var _a = factory_1.getContext(this), module = _a.module, node = _a.node;\r\n        var forbegin = document.createComment(\"*for begin\");\r\n        forbegin.rxcompId = node.rxcompId;\r\n        node.parentNode.replaceChild(forbegin, node);\r\n        var forend = this.forend = document.createComment(\"*for end\");\r\n        forbegin.parentNode.insertBefore(forend, forbegin.nextSibling);\r\n        var expression = node.getAttribute('*for');\r\n        node.removeAttribute('*for');\r\n        var token = this.token = this.getExpressionToken(expression);\r\n        this.forFunction = module.makeFunction(token.iterable);\r\n    };\r\n    ForStructure.prototype.onChanges = function (changes) {\r\n        var context = factory_1.getContext(this);\r\n        var module = context.module;\r\n        var node = context.node;\r\n        // resolve\r\n        var token = this.token;\r\n        var result = module.resolve(this.forFunction, changes, this) || [];\r\n        var isArray = Array.isArray(result);\r\n        var array = isArray ? result : Object.keys(result);\r\n        var total = array.length;\r\n        var previous = this.instances.length;\r\n        for (var i = 0; i < Math.max(previous, total); i++) {\r\n            if (i < total) {\r\n                var key = isArray ? i : array[i];\r\n                var value = isArray ? array[key] : result[key];\r\n                if (i < previous) {\r\n                    // update\r\n                    var instance = this.instances[i];\r\n                    instance[token.key] = key;\r\n                    instance[token.value] = value;\r\n                    /*\r\n                    if (!nextSibling) {\r\n                        const context = getContext(instance);\r\n                        const node = context.node;\r\n                        this.forend.parentNode.insertBefore(node, this.forend);\r\n                    } else {\r\n                        nextSibling = nextSibling.nextSibling;\r\n                    }\r\n                    */\r\n                }\r\n                else {\r\n                    // create\r\n                    var clonedNode = node.cloneNode(true);\r\n                    delete clonedNode.rxcompId;\r\n                    this.forend.parentNode.insertBefore(clonedNode, this.forend);\r\n                    // !!! todo: check context.parentInstance\r\n                    var args = [token.key, key, token.value, value, i, total, context.parentInstance];\r\n                    var instance = module.makeInstance(clonedNode, for_item_1.default, context.selector, context.parentInstance, args);\r\n                    if (instance) {\r\n                        var forItemContext = factory_1.getContext(instance);\r\n                        // console.log('ForStructure', clonedNode, forItemContext.instance.constructor.name);\r\n                        module.compile(clonedNode, forItemContext.instance);\r\n                        // nextSibling = clonedNode.nextSibling;\r\n                        this.instances.push(instance);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // remove\r\n                var instance = this.instances[i];\r\n                var node_1 = factory_1.getContext(instance).node;\r\n                node_1.parentNode.removeChild(node_1);\r\n                module.remove(node_1);\r\n            }\r\n        }\r\n        this.instances.length = array.length;\r\n        // console.log('ForStructure', this.instances, token);\r\n    };\r\n    ForStructure.prototype.getExpressionToken = function (expression) {\r\n        if (expression === null) {\r\n            throw ('invalid for');\r\n        }\r\n        if (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n            throw ('invalid for');\r\n        }\r\n        var expressions = expression.split(';').map(function (x) { return x.trim(); }).filter(function (x) { return x !== ''; });\r\n        var forExpressions = expressions[0].split(' of ').map(function (x) { return x.trim(); });\r\n        var value = forExpressions[0].replace(/\\s*let\\s*/, '');\r\n        var iterable = forExpressions[1];\r\n        var key = 'index';\r\n        var keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n        if (keyValueMatches) {\r\n            key = keyValueMatches[1];\r\n            value = keyValueMatches[2];\r\n        }\r\n        if (expressions.length > 1) {\r\n            var indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(function (x) { return x.trim(); });\r\n            if (indexExpressions.length === 3) {\r\n                key = indexExpressions[1];\r\n            }\r\n        }\r\n        return { key: key, value: value, iterable: iterable };\r\n    };\r\n    return ForStructure;\r\n}(structure_1.default));\r\nexports.default = ForStructure;\r\nForStructure.meta = {\r\n    selector: '[*for]',\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = require(\"../core/factory\");\r\nvar HrefDirective = /** @class */ (function (_super) {\r\n    tslib_1.__extends(HrefDirective, _super);\r\n    function HrefDirective() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(HrefDirective.prototype, \"href\", {\r\n        get: function () {\r\n            return this.href_;\r\n        },\r\n        set: function (href) {\r\n            if (this.href_ !== href) {\r\n                this.href_ = href;\r\n                var node = factory_1.getContext(this).node;\r\n                href ? node.setAttribute('href', href) : node.removeAttribute('href');\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return HrefDirective;\r\n}(directive_1.default));\r\nexports.default = HrefDirective;\r\nHrefDirective.meta = {\r\n    selector: '[[href]]',\r\n    inputs: ['href'],\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar factory_1 = require(\"../core/factory\");\r\nvar structure_1 = tslib_1.__importDefault(require(\"../core/structure\"));\r\nvar IfStructure = /** @class */ (function (_super) {\r\n    tslib_1.__extends(IfStructure, _super);\r\n    function IfStructure() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    IfStructure.prototype.onInit = function () {\r\n        var _a = factory_1.getContext(this), module = _a.module, node = _a.node;\r\n        var ifbegin = this.ifbegin = document.createComment(\"*if begin\");\r\n        ifbegin.rxcompId = node.rxcompId;\r\n        node.parentNode.replaceChild(ifbegin, node);\r\n        var ifend = this.ifend = document.createComment(\"*if end\");\r\n        ifbegin.parentNode.insertBefore(ifend, ifbegin.nextSibling);\r\n        var expression = node.getAttribute('*if');\r\n        this.ifFunction = module.makeFunction(expression);\r\n        var clonedNode = node.cloneNode(true);\r\n        clonedNode.removeAttribute('*if');\r\n        this.clonedNode = clonedNode;\r\n        this.element = clonedNode.cloneNode(true);\r\n        // console.log('IfStructure.expression', expression);\r\n    };\r\n    IfStructure.prototype.onChanges = function (changes) {\r\n        var module = factory_1.getContext(this).module;\r\n        // console.log('IfStructure.onChanges', changes);\r\n        var value = module.resolve(this.ifFunction, changes, this);\r\n        var element = this.element;\r\n        if (value) {\r\n            if (!element.parentNode) {\r\n                var ifend = this.ifend;\r\n                ifend.parentNode.insertBefore(element, ifend);\r\n                module.compile(element);\r\n            }\r\n        }\r\n        else {\r\n            if (element.parentNode) {\r\n                module.remove(element, this);\r\n                element.parentNode.removeChild(element);\r\n                this.element = this.clonedNode.cloneNode(true);\r\n            }\r\n        }\r\n    };\r\n    IfStructure.meta = {\r\n        selector: '[*if]',\r\n    };\r\n    return IfStructure;\r\n}(structure_1.default));\r\nexports.default = IfStructure;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = require(\"../core/factory\");\r\nvar InnerHtmlDirective = /** @class */ (function (_super) {\r\n    tslib_1.__extends(InnerHtmlDirective, _super);\r\n    function InnerHtmlDirective() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(InnerHtmlDirective.prototype, \"innerHTML\", {\r\n        get: function () {\r\n            return this.innerHTML_;\r\n        },\r\n        set: function (innerHTML) {\r\n            if (this.innerHTML_ !== innerHTML) {\r\n                this.innerHTML_ = innerHTML;\r\n                var node = factory_1.getContext(this).node;\r\n                node.innerHTML = innerHTML == undefined ? '' : innerHTML; // !!! keep == loose equality\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return InnerHtmlDirective;\r\n}(directive_1.default));\r\nexports.default = InnerHtmlDirective;\r\nInnerHtmlDirective.meta = {\r\n    selector: \"[innerHTML]\",\r\n    inputs: ['innerHTML'],\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Pipe = /** @class */ (function () {\r\n    function Pipe() {\r\n    }\r\n    Pipe.transform = function (value) {\r\n        return value;\r\n    };\r\n    return Pipe;\r\n}());\r\nexports.default = Pipe;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar pipe_1 = tslib_1.__importDefault(require(\"../core/pipe\"));\r\nvar JsonPipe = /** @class */ (function (_super) {\r\n    tslib_1.__extends(JsonPipe, _super);\r\n    function JsonPipe() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    // !!! todo: Remove circular structures when converting to JSON\r\n    JsonPipe.transform = function (value) {\r\n        return JSON.stringify(value, null, '\\t');\r\n    };\r\n    return JsonPipe;\r\n}(pipe_1.default));\r\nexports.default = JsonPipe;\r\nJsonPipe.meta = {\r\n    name: 'json',\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar rxjs_1 = require(\"rxjs\");\r\nvar operators_1 = require(\"rxjs/operators\");\r\nvar component_1 = tslib_1.__importDefault(require(\"../core/component\"));\r\nvar context_1 = tslib_1.__importDefault(require(\"../core/context\"));\r\nvar factory_1 = tslib_1.__importStar(require(\"../core/factory\"));\r\nvar structure_1 = tslib_1.__importDefault(require(\"../core/structure\"));\r\nvar ID = 0;\r\nvar Module = /** @class */ (function () {\r\n    function Module() {\r\n    }\r\n    Module.prototype.compile = function (node, parentInstance) {\r\n        var _this = this;\r\n        var componentNode;\r\n        var instances = Module.querySelectorsAll(node, this.meta.selectors, []).map(function (match) {\r\n            if (componentNode && componentNode !== match.node) {\r\n                parentInstance = undefined;\r\n            }\r\n            var instance = _this.makeInstance(match.node, match.factory, match.selector, parentInstance);\r\n            if (match.factory.prototype instanceof component_1.default) {\r\n                componentNode = match.node;\r\n            }\r\n            return instance;\r\n        }).filter(function (x) { return x !== undefined; });\r\n        // console.log('compile', instances, node, parentInstance);\r\n        return instances;\r\n    };\r\n    Module.prototype.makeInstance = function (node, factory, selector, parentInstance, args) {\r\n        var _this = this;\r\n        if (parentInstance || node.parentNode) {\r\n            var meta_1 = factory.meta;\r\n            // collect parentInstance scope\r\n            parentInstance = parentInstance || this.getParentInstance(node.parentNode);\r\n            if (!parentInstance) {\r\n                return undefined;\r\n            }\r\n            // creating factory instance\r\n            var instance_1 = new (factory.bind.apply(factory, tslib_1.__spreadArrays([void 0], (args || []))))();\r\n            // creating instance context\r\n            var context = Module.makeContext(this, instance_1, parentInstance, node, factory, selector);\r\n            // creating component input and outputs\r\n            if (meta_1) {\r\n                this.makeHosts(meta_1, instance_1, node);\r\n                context.inputs = this.makeInputs(meta_1, instance_1);\r\n                context.outputs = this.makeOutputs(meta_1, instance_1);\r\n                if (parentInstance instanceof factory_1.default) {\r\n                    this.resolveInputsOutputs(instance_1, parentInstance);\r\n                }\r\n            }\r\n            // calling onInit event\r\n            instance_1.onInit();\r\n            // subscribe to parent changes\r\n            if (parentInstance instanceof factory_1.default) {\r\n                parentInstance.changes$.pipe(\r\n                // filter(() => node.parentNode),\r\n                // debounceTime(1),\r\n                /*\r\n                distinctUntilChanged(function(prev, curr) {\r\n                    // console.log(isComponent, context.inputs);\r\n                    if (isComponent && meta && Object.keys(context.inputs).length === 0) {\r\n                        return true; // same\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }),\r\n                */\r\n                operators_1.takeUntil(instance_1.unsubscribe$)).subscribe(function (changes) {\r\n                    // resolve component input outputs\r\n                    if (meta_1) {\r\n                        _this.resolveInputsOutputs(instance_1, changes);\r\n                    }\r\n                    // calling onChanges event with changes\r\n                    instance_1.onChanges(changes);\r\n                    // push instance changes for subscribers\r\n                    instance_1.pushChanges();\r\n                });\r\n            }\r\n            return instance_1;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    Module.prototype.makeFunction = function (expression, params) {\r\n        if (params === void 0) { params = ['$instance']; }\r\n        if (expression) {\r\n            expression = Module.parseExpression(expression);\r\n            // console.log(expression);\r\n            var args = params.join(',');\r\n            var expression_func = new Function(\"with(this) {\\n\\t\\t\\t\\treturn (function (\" + args + \", $$module) {\\n\\t\\t\\t\\t\\tconst $$pipes = $$module.meta.pipes;\\n\\t\\t\\t\\t\\treturn \" + expression + \";\\n\\t\\t\\t\\t}.bind(this)).apply(this, arguments);\\n\\t\\t\\t}\");\r\n            // console.log(this, $$module, $$pipes, \"${expression}\");\r\n            // console.log(expression_func);\r\n            return expression_func;\r\n        }\r\n        else {\r\n            return function () { return null; };\r\n        }\r\n    };\r\n    Module.prototype.resolve = function (expression, parentInstance, payload) {\r\n        // console.log(expression, parentInstance, payload);\r\n        return expression.apply(parentInstance, [payload, this]);\r\n    };\r\n    Module.prototype.parse = function (node, instance) {\r\n        for (var i = 0; i < node.childNodes.length; i++) {\r\n            var child = node.childNodes[i];\r\n            if (child.nodeType === 1) {\r\n                var element = child;\r\n                var context = getContextByNode(element);\r\n                if (!context) {\r\n                    this.parse(element, instance);\r\n                }\r\n            }\r\n            else if (child.nodeType === 3) {\r\n                var text = child;\r\n                this.parseTextNode(text, instance);\r\n            }\r\n        }\r\n    };\r\n    Module.prototype.remove = function (node, keepInstance) {\r\n        var keepContext = keepInstance ? factory_1.getContext(keepInstance) : undefined;\r\n        Module.traverseDown(node, function (node) {\r\n            var rxcompId = node.rxcompId;\r\n            if (rxcompId) {\r\n                var keepContexts = Module.deleteContext(rxcompId, keepContext);\r\n                if (keepContexts.length === 0) {\r\n                    delete node.rxcompId;\r\n                }\r\n            }\r\n        });\r\n        return node;\r\n    };\r\n    Module.prototype.destroy = function () {\r\n        this.remove(this.meta.node);\r\n        this.meta.node.innerHTML = this.meta.nodeInnerHTML;\r\n    };\r\n    Module.prototype.makeContext = function (instance, parentInstance, node, selector) {\r\n        var context = Module.makeContext(this, instance, parentInstance, node, instance.constructor, selector);\r\n        // console.log('Module.makeContext', context, context.instance, context.node);\r\n        return context;\r\n    };\r\n    Module.prototype.getInstance = function (node) {\r\n        if (node instanceof Document) {\r\n            return window; // !!! window or global\r\n        }\r\n        var context = getContextByNode(node);\r\n        if (context) {\r\n            return context.instance;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    Module.prototype.getParentInstance = function (node) {\r\n        var _this = this;\r\n        return Module.traverseUp(node, function (node) {\r\n            return _this.getInstance(node);\r\n        });\r\n    };\r\n    // reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T;\r\n    Module.prototype.parseTextNode = function (node, instance) {\r\n        var _this = this;\r\n        var expressions = node.nodeExpressions;\r\n        if (!expressions) {\r\n            expressions = this.parseTextNodeExpression(node.wholeText);\r\n        }\r\n        var replacedText = expressions.reduce(function (p, c) {\r\n            var text;\r\n            if (typeof c === 'function') { // instanceOf ExpressionFunction ?;\r\n                text = _this.resolve(c, instance, instance);\r\n                if (text == undefined) { // !!! keep == loose equality\r\n                    text = '';\r\n                }\r\n            }\r\n            else {\r\n                text = c;\r\n            }\r\n            return p + text;\r\n        }, '');\r\n        if (node.nodeValue !== replacedText) {\r\n            var textNode = document.createTextNode(replacedText);\r\n            textNode.nodeExpressions = expressions;\r\n            node.parentNode.replaceChild(textNode, node);\r\n        }\r\n    };\r\n    Module.prototype.pushFragment = function (nodeValue, from, to, expressions) {\r\n        var fragment = nodeValue.substring(from, to);\r\n        expressions.push(fragment);\r\n    };\r\n    Module.prototype.parseTextNodeExpression = function (nodeValue) {\r\n        var expressions = [];\r\n        var regex = /\\{{2}((([^{}])|(\\{([^{}]|(\\{.*?\\}))+?\\}))*?)\\}{2}/g;\r\n        var lastIndex = 0, matches;\r\n        while ((matches = regex.exec(nodeValue)) !== null) {\r\n            var index = regex.lastIndex - matches[0].length;\r\n            if (index > lastIndex) {\r\n                this.pushFragment(nodeValue, index, lastIndex, expressions);\r\n            }\r\n            lastIndex = regex.lastIndex;\r\n            var expression = this.makeFunction(matches[1]);\r\n            expressions.push(expression);\r\n        }\r\n        var length = nodeValue.length;\r\n        if (length > lastIndex) {\r\n            this.pushFragment(nodeValue, lastIndex, length, expressions);\r\n        }\r\n        return expressions;\r\n    };\r\n    Module.prototype.makeHosts = function (meta, instance, node) {\r\n        if (meta.hosts) {\r\n            Object.keys(meta.hosts).forEach(function (key) {\r\n                var factory = meta.hosts[key];\r\n                instance[key] = getHost(instance, factory, node);\r\n            });\r\n        }\r\n    };\r\n    Module.prototype.makeInput = function (instance, key) {\r\n        var node = factory_1.getContext(instance).node;\r\n        var input = null, expression = null;\r\n        if (node.hasAttribute(\"[\" + key + \"]\")) {\r\n            expression = node.getAttribute(\"[\" + key + \"]\");\r\n        }\r\n        else if (node.hasAttribute(key)) {\r\n            // const attribute = node.getAttribute(key).replace(/{{/g, '\"+').replace(/}}/g, '+\"');\r\n            var attribute = node.getAttribute(key).replace(/({{)|(}})|(\")/g, function (substring, a, b, c) {\r\n                if (a) {\r\n                    return '\"+';\r\n                }\r\n                if (b) {\r\n                    return '+\"';\r\n                }\r\n                if (c) {\r\n                    return '\\\"';\r\n                }\r\n                return '';\r\n            });\r\n            expression = \"\\\"\" + attribute + \"\\\"\";\r\n        }\r\n        if (expression) {\r\n            input = this.makeFunction(expression);\r\n        }\r\n        return input;\r\n    };\r\n    Module.prototype.makeInputs = function (meta, instance) {\r\n        var _this = this;\r\n        var inputs = {};\r\n        if (meta.inputs) {\r\n            meta.inputs.forEach(function (key, i) {\r\n                var input = _this.makeInput(instance, key);\r\n                if (input) {\r\n                    inputs[key] = input;\r\n                }\r\n            });\r\n        }\r\n        return inputs;\r\n    };\r\n    Module.prototype.makeOutput = function (instance, key) {\r\n        var _this = this;\r\n        var context = factory_1.getContext(instance);\r\n        var node = context.node;\r\n        var parentInstance = context.parentInstance;\r\n        var expression = node.getAttribute(\"(\" + key + \")\");\r\n        var outputFunction = expression ? this.makeFunction(expression, ['$event']) : null;\r\n        var output$ = new rxjs_1.Subject().pipe(operators_1.tap(function (event) {\r\n            if (outputFunction) {\r\n                // console.log(expression, parentInstance);\r\n                _this.resolve(outputFunction, parentInstance, event);\r\n            }\r\n        }));\r\n        output$.pipe(operators_1.takeUntil(instance.unsubscribe$)).subscribe();\r\n        instance[key] = output$;\r\n        return output$;\r\n    };\r\n    Module.prototype.makeOutputs = function (meta, instance) {\r\n        var _this = this;\r\n        var outputs = {};\r\n        if (meta.outputs) {\r\n            meta.outputs.forEach(function (key) {\r\n                var output = _this.makeOutput(instance, key);\r\n                if (output) {\r\n                    outputs[key] = output;\r\n                }\r\n            });\r\n        }\r\n        return outputs;\r\n    };\r\n    Module.prototype.resolveInputsOutputs = function (instance, changes) {\r\n        var context = factory_1.getContext(instance);\r\n        var parentInstance = context.parentInstance;\r\n        var inputs = context.inputs;\r\n        for (var key in inputs) {\r\n            var inputFunction = inputs[key];\r\n            var value = this.resolve(inputFunction, parentInstance, instance);\r\n            instance[key] = value;\r\n        }\r\n    };\r\n    Module.parseExpression = function (expression) {\r\n        var l = '┌';\r\n        var r = '┘';\r\n        var rx1 = /(\\()([^\\(\\)]*)(\\))/;\r\n        while (expression.match(rx1)) {\r\n            expression = expression.replace(rx1, function (substring) {\r\n                var args = [];\r\n                for (var _i = 1; _i < arguments.length; _i++) {\r\n                    args[_i - 1] = arguments[_i];\r\n                }\r\n                return \"\" + l + Module.parsePipes(args[1]) + r;\r\n            });\r\n        }\r\n        expression = Module.parsePipes(expression);\r\n        expression = expression.replace(/(┌)|(┘)/g, function (substring) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            return args[0] ? '(' : ')';\r\n        });\r\n        return Module.parseOptionalChaining(expression);\r\n    };\r\n    Module.parsePipes = function (expression) {\r\n        var l = '┌';\r\n        var r = '┘';\r\n        var rx1 = /(.*?[^\\|])\\|([^\\|]+)/;\r\n        while (expression.match(rx1)) {\r\n            expression = expression.replace(rx1, function (substring) {\r\n                var args = [];\r\n                for (var _i = 1; _i < arguments.length; _i++) {\r\n                    args[_i - 1] = arguments[_i];\r\n                }\r\n                var value = args[0].trim();\r\n                var params = Module.parsePipeParams(args[1]);\r\n                var func = params.shift().trim();\r\n                return \"$$pipes.\" + func + \".transform\" + l + tslib_1.__spreadArrays([value], params) + r;\r\n            });\r\n        }\r\n        return expression;\r\n    };\r\n    Module.parsePipeParams = function (expression) {\r\n        var segments = [];\r\n        var i = 0, word = '', block = 0;\r\n        var t = expression.length;\r\n        while (i < t) {\r\n            var c = expression.substr(i, 1);\r\n            if (c === '{' || c === '(' || c === '[') {\r\n                block++;\r\n            }\r\n            if (c === '}' || c === ')' || c === ']') {\r\n                block--;\r\n            }\r\n            if (c === ':' && block === 0) {\r\n                if (word.length) {\r\n                    segments.push(word.trim());\r\n                }\r\n                word = '';\r\n            }\r\n            else {\r\n                word += c;\r\n            }\r\n            i++;\r\n        }\r\n        if (word.length) {\r\n            segments.push(word.trim());\r\n        }\r\n        return segments;\r\n    };\r\n    Module.parseOptionalChaining = function (expression) {\r\n        var regex = /(\\w+(\\?\\.))+([\\.|\\w]+)/g;\r\n        var previous;\r\n        expression = expression.replace(regex, function (substring) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            var tokens = substring.split('?.');\r\n            for (var i = 0; i < tokens.length - 1; i++) {\r\n                var a = i > 0 ? \"(\" + tokens[i] + \" = \" + previous + \")\" : tokens[i];\r\n                var b = tokens[i + 1];\r\n                previous = i > 0 ? a + \".\" + b : \"(\" + a + \" ? \" + a + \".\" + b + \" : void 0)\";\r\n            }\r\n            return previous || '';\r\n        });\r\n        return expression;\r\n    };\r\n    Module.makeContext = function (module, instance, parentInstance, node, factory, selector) {\r\n        instance.rxcompId = ++ID;\r\n        var context = { module: module, instance: instance, parentInstance: parentInstance, node: node, factory: factory, selector: selector };\r\n        var rxcompNodeId = node.rxcompId = (node.rxcompId || instance.rxcompId);\r\n        var nodeContexts = factory_1.NODES[rxcompNodeId] || (factory_1.NODES[rxcompNodeId] = []);\r\n        nodeContexts.push(context);\r\n        factory_1.CONTEXTS[instance.rxcompId] = context;\r\n        return context;\r\n    };\r\n    Module.deleteContext = function (id, keepContext) {\r\n        var keepContexts = [];\r\n        var nodeContexts = factory_1.NODES[id];\r\n        if (nodeContexts) {\r\n            nodeContexts.forEach(function (context) {\r\n                if (context === keepContext) {\r\n                    keepContexts.push(keepContext);\r\n                }\r\n                else {\r\n                    var instance = context.instance;\r\n                    instance.unsubscribe$.next();\r\n                    instance.unsubscribe$.complete();\r\n                    instance.onDestroy();\r\n                    delete factory_1.CONTEXTS[instance.rxcompId];\r\n                }\r\n            });\r\n            if (keepContexts.length) {\r\n                factory_1.NODES[id] = keepContexts;\r\n            }\r\n            else {\r\n                delete factory_1.NODES[id];\r\n            }\r\n        }\r\n        return keepContexts;\r\n    };\r\n    Module.matchSelectors = function (node, selectors, results) {\r\n        for (var i = 0; i < selectors.length; i++) {\r\n            var selectorResult = selectors[i](node);\r\n            if (selectorResult) {\r\n                var factory = selectorResult.factory;\r\n                if (factory.prototype instanceof component_1.default && factory.meta.template) {\r\n                    node.innerHTML = factory.meta.template;\r\n                }\r\n                results.push(selectorResult);\r\n                if (factory.prototype instanceof structure_1.default) {\r\n                    // console.log('Structure', node);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    };\r\n    Module.querySelectorsAll = function (node, selectors, results) {\r\n        if (node.nodeType === 1) {\r\n            var selectorResults = this.matchSelectors(node, selectors, []);\r\n            results = results.concat(selectorResults);\r\n            var structure = selectorResults.find(function (x) { return x.factory.prototype instanceof structure_1.default; });\r\n            if (structure) {\r\n                return results;\r\n            }\r\n            var childNodes = node.childNodes;\r\n            for (var i = 0; i < childNodes.length; i++) {\r\n                results = this.querySelectorsAll(childNodes[i], selectors, results);\r\n            }\r\n        }\r\n        return results;\r\n    };\r\n    Module.traverseUp = function (node, callback, i) {\r\n        if (i === void 0) { i = 0; }\r\n        if (!node) {\r\n            return;\r\n        }\r\n        var result = callback(node, i);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        return this.traverseUp(node.parentNode, callback, i + 1);\r\n    };\r\n    Module.traverseDown = function (node, callback, i) {\r\n        if (i === void 0) { i = 0; }\r\n        if (!node) {\r\n            return;\r\n        }\r\n        var result = callback(node, i);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        if (node.nodeType === 1) {\r\n            var j = 0, t = node.childNodes.length;\r\n            while (j < t && !result) {\r\n                result = this.traverseDown(node.childNodes[j], callback, i + 1);\r\n                j++;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Module.traversePrevious = function (node, callback, i) {\r\n        if (i === void 0) { i = 0; }\r\n        if (!node) {\r\n            return;\r\n        }\r\n        var result = callback(node, i);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        return this.traversePrevious(node.previousSibling, callback, i + 1);\r\n    };\r\n    Module.traverseNext = function (node, callback, i) {\r\n        if (i === void 0) { i = 0; }\r\n        if (!node) {\r\n            return;\r\n        }\r\n        var result = callback(node, i);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        return this.traverseNext(node.nextSibling, callback, i + 1);\r\n    };\r\n    return Module;\r\n}());\r\nexports.default = Module;\r\nfunction getContextByNode(node) {\r\n    var context;\r\n    var rxcompId = node.rxcompId;\r\n    if (rxcompId) {\r\n        var nodeContexts = factory_1.NODES[rxcompId];\r\n        if (nodeContexts) {\r\n            context = nodeContexts.reduce(function (previous, current) {\r\n                if (current.factory.prototype instanceof component_1.default) {\r\n                    return current;\r\n                }\r\n                else if (current.factory.prototype instanceof context_1.default) {\r\n                    return previous ? previous : current;\r\n                }\r\n                else {\r\n                    return previous;\r\n                }\r\n            }, undefined);\r\n            // console.log(node.rxcompId, context);\r\n        }\r\n    }\r\n    return context;\r\n}\r\nexports.getContextByNode = getContextByNode;\r\nfunction getHost(instance, factory, node) {\r\n    if (!node) {\r\n        node = factory_1.getContext(instance).node;\r\n    }\r\n    if (node.rxcompId) {\r\n        var nodeContexts = factory_1.NODES[node.rxcompId];\r\n        if (nodeContexts) {\r\n            // console.log(nodeContexts);\r\n            for (var i = 0; i < nodeContexts.length; i++) {\r\n                var context = nodeContexts[i];\r\n                if (context.instance !== instance) {\r\n                    // console.log(context.instance, instance);\r\n                    if (context.instance instanceof factory) {\r\n                        return context.instance;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (node.parentNode) {\r\n        return getHost(instance, factory, node.parentNode);\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexports.getHost = getHost;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = require(\"../core/factory\");\r\nvar SrcDirective = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SrcDirective, _super);\r\n    function SrcDirective() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SrcDirective.prototype, \"src\", {\r\n        get: function () {\r\n            return this.src_;\r\n        },\r\n        set: function (src) {\r\n            if (this.src_ !== src) {\r\n                this.src_ = src;\r\n                var node = factory_1.getContext(this).node;\r\n                src ? node.setAttribute('src', src) : node.removeAttribute('src');\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SrcDirective;\r\n}(directive_1.default));\r\nexports.default = SrcDirective;\r\nSrcDirective.meta = {\r\n    selector: '[[src]]',\r\n    inputs: ['src'],\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = require(\"../core/factory\");\r\nvar StyleDirective = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StyleDirective, _super);\r\n    function StyleDirective() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    StyleDirective.prototype.onChanges = function () {\r\n        var node = factory_1.getContext(this).node;\r\n        var style = this.style;\r\n        var previousStyle = this.previousStyle;\r\n        if (previousStyle) {\r\n            for (var key in previousStyle) {\r\n                if (!style || !style[key]) {\r\n                    var splitted = key.split('.');\r\n                    var propertyName = splitted.shift();\r\n                    node.style.removeProperty(propertyName);\r\n                }\r\n            }\r\n        }\r\n        if (style) {\r\n            for (var key in style) {\r\n                if (!previousStyle || previousStyle[key] !== style[key]) {\r\n                    var splitted = key.split('.');\r\n                    var propertyName = splitted.shift();\r\n                    var value = style[key] + (splitted.length ? splitted[0] : '');\r\n                    // console.log(propertyName, value, style, key, style[key]);\r\n                    node.style.setProperty(propertyName, value);\r\n                }\r\n            }\r\n        }\r\n        this.previousStyle = style;\r\n        // console.log('StyleDirective.onChanges', style);\r\n    };\r\n    return StyleDirective;\r\n}(directive_1.default));\r\nexports.default = StyleDirective;\r\nStyleDirective.meta = {\r\n    selector: \"[[style]]\",\r\n    inputs: ['style']\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar class_directive_1 = tslib_1.__importDefault(require(\"./class/class.directive\"));\r\nvar event_directive_1 = tslib_1.__importDefault(require(\"./event/event.directive\"));\r\nvar for_structure_1 = tslib_1.__importDefault(require(\"./for/for.structure\"));\r\nvar href_directive_1 = tslib_1.__importDefault(require(\"./href/href.directive\"));\r\nvar if_structure_1 = tslib_1.__importDefault(require(\"./if/if.structure\"));\r\nvar inner_html_directive_1 = tslib_1.__importDefault(require(\"./inner-html/inner-html.directive\"));\r\nvar json_pipe_1 = tslib_1.__importDefault(require(\"./json/json.pipe\"));\r\nvar module_1 = tslib_1.__importDefault(require(\"./module/module\"));\r\nvar src_directive_1 = tslib_1.__importDefault(require(\"./src/src.directive\"));\r\nvar style_directive_1 = tslib_1.__importDefault(require(\"./style/style.directive\"));\r\nvar factories = [\r\n    class_directive_1.default,\r\n    event_directive_1.default,\r\n    for_structure_1.default,\r\n    href_directive_1.default,\r\n    if_structure_1.default,\r\n    inner_html_directive_1.default,\r\n    src_directive_1.default,\r\n    style_directive_1.default,\r\n];\r\nvar pipes = [\r\n    json_pipe_1.default,\r\n];\r\nvar CoreModule = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CoreModule, _super);\r\n    function CoreModule() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CoreModule.meta = {\r\n        declarations: tslib_1.__spreadArrays(factories, pipes),\r\n        exports: tslib_1.__spreadArrays(factories, pipes)\r\n    };\r\n    return CoreModule;\r\n}(module_1.default));\r\nexports.default = CoreModule;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar component_1 = tslib_1.__importDefault(require(\"../core/component\"));\r\nvar directive_1 = tslib_1.__importDefault(require(\"../core/directive\"));\r\nvar factory_1 = tslib_1.__importDefault(require(\"../core/factory\"));\r\nvar pipe_1 = tslib_1.__importDefault(require(\"../core/pipe\"));\r\nvar structure_1 = tslib_1.__importDefault(require(\"../core/structure\"));\r\nvar ORDER = [structure_1.default, component_1.default, directive_1.default];\r\nvar Platform = /** @class */ (function () {\r\n    function Platform() {\r\n    }\r\n    Platform.bootstrap = function (moduleFactory) {\r\n        if (!moduleFactory) {\r\n            throw ('missing moduleFactory');\r\n        }\r\n        if (!moduleFactory.meta) {\r\n            throw ('missing moduleFactory meta');\r\n        }\r\n        if (!moduleFactory.meta.bootstrap) {\r\n            throw ('missing bootstrap');\r\n        }\r\n        if (!moduleFactory.meta.bootstrap.meta) {\r\n            throw ('missing bootstrap meta');\r\n        }\r\n        if (!moduleFactory.meta.bootstrap.meta.selector) {\r\n            throw ('missing bootstrap meta selector');\r\n        }\r\n        var meta = this.resolveMeta(moduleFactory);\r\n        var module = new moduleFactory();\r\n        module.meta = meta;\r\n        var instances = module.compile(meta.node, window);\r\n        var root = instances[0];\r\n        // if (root instanceof module.meta.bootstrap) {\r\n        root.pushChanges();\r\n        // }\r\n        return module;\r\n    };\r\n    Platform.isBrowser = function () {\r\n        return Boolean(window);\r\n    };\r\n    // static isServer() {}\r\n    Platform.querySelector = function (selector) {\r\n        return document.querySelector(selector);\r\n    };\r\n    Platform.resolveMeta = function (moduleFactory) {\r\n        var meta = this.resolveImportedMeta(moduleFactory);\r\n        var bootstrap = moduleFactory.meta.bootstrap;\r\n        var node = this.querySelector(bootstrap.meta.selector);\r\n        if (!node) {\r\n            throw (\"missing node \" + bootstrap.meta.selector);\r\n        }\r\n        var nodeInnerHTML = node.innerHTML;\r\n        var pipes = this.resolvePipes(meta);\r\n        var factories = this.resolveFactories(meta);\r\n        this.sortFactories(factories);\r\n        factories.unshift(bootstrap);\r\n        var selectors = this.unwrapSelectors(factories);\r\n        return { factories: factories, pipes: pipes, selectors: selectors, bootstrap: bootstrap, node: node, nodeInnerHTML: nodeInnerHTML };\r\n    };\r\n    Platform.resolveImportedMeta = function (moduleFactory) {\r\n        var _this = this;\r\n        var meta = Object.assign({\r\n            imports: [],\r\n            declarations: [],\r\n            pipes: [],\r\n            exports: []\r\n        }, moduleFactory.meta);\r\n        meta.imports = (moduleFactory.meta.imports || []).map(function (moduleFactory) { return _this.resolveImportedMeta(moduleFactory); });\r\n        return meta;\r\n    };\r\n    Platform.resolvePipes = function (meta, exported) {\r\n        var _this = this;\r\n        var importedPipes = meta.imports.map(function (importMeta) { return _this.resolvePipes(importMeta, true); });\r\n        var pipes = {};\r\n        var pipeList = (exported ? meta.exports : meta.declarations).filter(function (x) { return x.prototype instanceof pipe_1.default; });\r\n        pipeList.forEach(function (pipeFactory) { return pipes[pipeFactory.meta.name] = pipeFactory; });\r\n        return Object.assign.apply(Object, tslib_1.__spreadArrays([{}], importedPipes, [pipes]));\r\n    };\r\n    Platform.resolveFactories = function (meta, exported) {\r\n        var _a;\r\n        var _this = this;\r\n        var importedFactories = meta.imports.map(function (importMeta) { return _this.resolveFactories(importMeta, true); });\r\n        var factoryList = (exported ? meta.exports : meta.declarations).filter(function (x) { return x.prototype instanceof factory_1.default; });\r\n        return (_a = Array.prototype.concat).call.apply(_a, tslib_1.__spreadArrays([factoryList], importedFactories));\r\n    };\r\n    Platform.sortFactories = function (factories) {\r\n        factories.sort(function (a, b) {\r\n            var ai = ORDER.reduce(function (p, c, i) { return a.prototype instanceof c ? i : p; }, -1);\r\n            var bi = ORDER.reduce(function (p, c, i) { return b.prototype instanceof c ? i : p; }, -1);\r\n            // return ai - bi;\r\n            var o = ai - bi;\r\n            if (o === 0) {\r\n                return (a.meta.hosts ? 1 : 0) - (b.meta.hosts ? 1 : 0);\r\n            }\r\n            return o;\r\n        });\r\n    };\r\n    Platform.getExpressions = function (selector) {\r\n        var matchers = [];\r\n        selector.replace(/\\.([\\w\\-\\_]+)|\\[(.+?\\]*)(\\=)(.*?)\\]|\\[(.+?\\]*)\\]|([\\w\\-\\_]+)/g, function (value, c1, a2, u3, v4, a5, e6) {\r\n            if (c1) {\r\n                matchers.push(function (node) {\r\n                    return node.classList.contains(c1);\r\n                });\r\n            }\r\n            if (a2) {\r\n                matchers.push(function (node) {\r\n                    return (node.hasAttribute(a2) && node.getAttribute(a2) === v4) ||\r\n                        (node.hasAttribute(\"[\" + a2 + \"]\") && node.getAttribute(\"[\" + a2 + \"]\") === v4);\r\n                });\r\n            }\r\n            if (a5) {\r\n                matchers.push(function (node) {\r\n                    return node.hasAttribute(a5) || node.hasAttribute(\"[\" + a5 + \"]\");\r\n                });\r\n            }\r\n            if (e6) {\r\n                matchers.push(function (node) {\r\n                    return node.nodeName.toLowerCase() === e6.toLowerCase();\r\n                });\r\n            }\r\n            return '';\r\n        });\r\n        return matchers;\r\n    };\r\n    Platform.unwrapSelectors = function (factories) {\r\n        var _this = this;\r\n        var selectors = [];\r\n        factories.forEach(function (factory) {\r\n            if (factory.meta && factory.meta.selector) {\r\n                factory.meta.selector.split(',').forEach(function (selector) {\r\n                    selector = selector.trim();\r\n                    var excludes = [];\r\n                    var matchSelector = selector.replace(/\\:not\\((.+?)\\)/g, function (value, unmatchSelector) {\r\n                        excludes = _this.getExpressions(unmatchSelector);\r\n                        return '';\r\n                    });\r\n                    var includes = _this.getExpressions(matchSelector);\r\n                    selectors.push(function (node) {\r\n                        var included = includes.reduce(function (p, match) {\r\n                            return p && match(node);\r\n                        }, true);\r\n                        var excluded = excludes.reduce(function (p, match) {\r\n                            return p || match(node);\r\n                        }, false);\r\n                        if (included && !excluded) {\r\n                            return { node: node, factory: factory, selector: selector };\r\n                        }\r\n                        else {\r\n                            return false;\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        });\r\n        return selectors;\r\n    };\r\n    return Platform;\r\n}());\r\nexports.default = Platform;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar platform_1 = tslib_1.__importDefault(require(\"./platform\"));\r\nvar Browser = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Browser, _super);\r\n    function Browser() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return Browser;\r\n}(platform_1.default));\r\nexports.default = Browser;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar class_directive_1 = require(\"./class/class.directive\");\r\nexports.ClassDirective = class_directive_1.default;\r\nvar core_module_1 = require(\"./core.module\");\r\nexports.CoreModule = core_module_1.default;\r\nvar component_1 = require(\"./core/component\");\r\nexports.Component = component_1.default;\r\nvar context_1 = require(\"./core/context\");\r\nexports.Context = context_1.default;\r\nvar directive_1 = require(\"./core/directive\");\r\nexports.Directive = directive_1.default;\r\nvar factory_1 = require(\"./core/factory\");\r\nexports.Factory = factory_1.default;\r\nexports.getContext = factory_1.getContext;\r\nvar pipe_1 = require(\"./core/pipe\");\r\nexports.Pipe = pipe_1.default;\r\nvar structure_1 = require(\"./core/structure\");\r\nexports.Structure = structure_1.default;\r\nvar event_directive_1 = require(\"./event/event.directive\");\r\nexports.EventDirective = event_directive_1.default;\r\nvar for_item_1 = require(\"./for/for.item\");\r\nexports.ForItem = for_item_1.default;\r\nvar for_structure_1 = require(\"./for/for.structure\");\r\nexports.ForStructure = for_structure_1.default;\r\nvar href_directive_1 = require(\"./href/href.directive\");\r\nexports.HrefDirective = href_directive_1.default;\r\nvar if_structure_1 = require(\"./if/if.structure\");\r\nexports.IfStructure = if_structure_1.default;\r\nvar inner_html_directive_1 = require(\"./inner-html/inner-html.directive\");\r\nexports.InnerHtmlDirective = inner_html_directive_1.default;\r\nvar json_pipe_1 = require(\"./json/json.pipe\");\r\nexports.JsonPipe = json_pipe_1.default;\r\nvar module_1 = require(\"./module/module\");\r\nexports.Module = module_1.default;\r\nexports.getContextByNode = module_1.getContextByNode;\r\nexports.getHost = module_1.getHost;\r\nvar browser_1 = require(\"./platform/browser\");\r\nexports.Browser = browser_1.default;\r\nvar platform_1 = require(\"./platform/platform\");\r\nexports.Platform = platform_1.default;\r\nvar src_directive_1 = require(\"./src/src.directive\");\r\nexports.SrcDirective = src_directive_1.default;\r\nvar style_directive_1 = require(\"./style/style.directive\");\r\nexports.StyleDirective = style_directive_1.default;\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { delay } from 'rxjs/operators';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nexport default class StoreService {\r\n\r\n\tstatic set(items) {\r\n\t\tLocalStorageService.set('items', items);\r\n\t\treturn this.get$().next(items);\r\n\t}\r\n\r\n\tstatic get$() {\r\n\t\tif (this.store$) {\r\n\t\t\treturn this.store$;\r\n\t\t}\r\n\t\tlet items = LocalStorageService.get('items');\r\n\t\tif (!items) {\r\n\t\t\titems = [\r\n\t\t\t\t{ id: 5, name: 'Cookies', date: new Date(Date.now()) },\r\n\t\t\t\t{ id: 4, name: 'Pizza', date: new Date(2019, 4, 4, 12) },\r\n\t\t\t\t{ id: 3, name: 'Pasta', date: new Date(2019, 3, 22, 12) },\r\n\t\t\t\t{ id: 2, name: 'Bread', date: new Date(2019, 0, 6, 12) },\r\n\t\t\t\t{ id: 1, name: 'Ham', date: new Date(2018, 11, 30, 12) },\r\n\t\t\t];\r\n\t\t\tLocalStorageService.set('items', items);\r\n\t\t}\r\n\t\tthis.store$ = new BehaviorSubject(items);\r\n\t\treturn this.store$.pipe(\r\n\t\t\tdelay(1) // simulate http\r\n\t\t);\r\n\t}\r\n\r\n\tstatic add$(patch) {\r\n\t\tconst item = Object.assign({\r\n\t\t\tid: Date.now(),\r\n\t\t\tdate: new Date(Date.now())\r\n\t\t}, patch);\r\n\t\tconst items = this.store$.getValue();\r\n\t\titems.unshift(item);\r\n\t\tthis.set(items);\r\n\t\treturn of(item).pipe(\r\n\t\t\tdelay(1) // simulate http\r\n\t\t);\r\n\t}\r\n\r\n\tstatic patch$(patch) {\r\n\t\tconst items = this.store$.getValue();\r\n\t\tconst item = items.find(x => x.id === patch.id);\r\n\t\tif (item) {\r\n\t\t\tObject.assign(item, patch);\r\n\t\t\tthis.set(items);\r\n\t\t}\r\n\t\treturn of(item).pipe(\r\n\t\t\tdelay(1) // simulate http\r\n\t\t);\r\n\t}\r\n\r\n\tstatic delete$(item) {\r\n\t\tconst items = this.store$.getValue();\r\n\t\tconst index = items.indexOf(item);\r\n\t\tif (index !== -1) {\r\n\t\t\titems.splice(index, 1);\r\n\t\t\tthis.set(items);\r\n\t\t}\r\n\t\treturn of(item).pipe(\r\n\t\t\tdelay(1) // simulate http\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport StoreService from './store/store.service';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// context\r\n\t\tconst context = getContext(this);\r\n\t\t// input\r\n\t\tthis.input = context.node.querySelector('.control--text');\r\n\t\t// items\r\n\t\tthis.items = [];\r\n\t\t// store service\r\n\t\tthis.store$ = StoreService.get$();\r\n\t\tthis.store$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\t// onpush change detection strategy\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonView() {\r\n\t\tconst context = getContext(this);\r\n\t\t// console.log('AppComponent.onView', context.node);\r\n\t}\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n\r\n\tonInput($event) {\r\n\t\t// console.log('AppComponent.onInput', $event, this);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonAddItem($event) {\r\n\t\tif (this.input.value) {\r\n\t\t\tStoreService.add$({\r\n\t\t\t\tname: this.input.value,\r\n\t\t\t}).subscribe(item => {\r\n\t\t\t\t// console.log('AppComponent.onAddItem', item);\r\n\t\t\t\tthis.input.value = null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonToggleItem(item) {\r\n\t\tStoreService.patch$({\r\n\t\t\tid: item.id,\r\n\t\t\tdone: !item.done,\r\n\t\t}).subscribe(item => {\r\n\t\t\t// console.log('AppComponent.onToggleItem', item);\r\n\t\t});\r\n\t}\r\n\r\n\tonRemoveItem(item) {\r\n\t\tStoreService.delete$(item).subscribe(item => {\r\n\t\t\t// console.log('AppComponent.onRemoveItem', item);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\nexport default class DatePipe extends Pipe {\r\n\r\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\r\n\t\tdateStyle: 'short',\r\n\t\ttimeStyle: 'short',\r\n\t}) {\r\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\r\n\t\treturn localeDateString;\r\n\t}\r\n\r\n}\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n","export const colors = [\r\n\t{ hex: '#ffffff', background: '#ffffff', foreground: '#003adc', accent: '#212121' },\r\n\t{ hex: '#212121', background: '#212121', foreground: '#ffffff', accent: '#003adc' },\r\n\t{ hex: '#ffffff', background: '#ffffff', foreground: '#212121', accent: '#003adc' },\r\n\t{ hex: '#003adc', background: '#003adc', foreground: '#ffffff', accent: '#212121' },\r\n];\r\n\r\nexport function hexToInt(hex) {\r\n\treturn parseInt(hex.replace(/^#/, ''), 16);\r\n}\r\n\r\nexport function randomHex() {\r\n\treturn colors[Math.floor(Math.random() * colors.length)].hex;\r\n}\r\n\r\nexport function randomColor() {\r\n\tconst hex = randomHex();\r\n\treturn hexToInt(hex);\r\n}\r\n\r\nexport function color(index, alpha) {\r\n\treturn hexToRgb(colors[index % colors.length].hex, alpha);\r\n}\r\n\r\nexport function background(index, alpha) {\r\n\treturn hexToRgb(colors[index % colors.length].background, alpha);\r\n}\r\n\r\nexport function foreground(index, alpha) {\r\n\treturn hexToRgb(colors[index % colors.length].foreground, alpha);\r\n}\r\n\r\nexport function accent(index, alpha) {\r\n\treturn hexToRgb(colors[index % colors.length].accent, alpha);\r\n}\r\n\r\nlet index = -1;\r\n\r\nexport function nextHex() {\r\n\tindex++;\r\n\treturn colors[index % colors.length].hex;\r\n}\r\n\r\nexport function nextColor() {\r\n\tconst hex = nextHex();\r\n\treturn hexToInt(hex);\r\n}\r\n\r\nexport function hexToRgb(hex, a) {\r\n\tconst r = parseInt(hex.slice(1, 3), 16);\r\n\tconst g = parseInt(hex.slice(3, 5), 16);\r\n\tconst b = parseInt(hex.slice(5, 7), 16);\r\n\tif (a) {\r\n\t\treturn `rgba(${r},${g},${b},${a})`;\r\n\t} else {\r\n\t\treturn `rgb(${r},${g},${b})`;\r\n\t}\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { accent, background, foreground } from '../colors/colors';\r\n\r\nexport default class TodoItemComponent extends Component {\r\n\r\n\t// onInit() {}\r\n\r\n\tonChanges(changes) {\r\n\t\t// console.log('onChanges', changes);\r\n\t\tthis.background = background(this.item.id);\r\n\t\tthis.foreground = foreground(this.item.id);\r\n\t\tthis.accent = accent(this.item.id);\r\n\t}\r\n\r\n\t// onView() {}\r\n\r\n\t// onDestroy() {}\r\n\r\n\tonToggle($event) {\r\n\t\t// console.log('onToggle', $event);\r\n\t\tthis.toggle.next($event);\r\n\t}\r\n\r\n\tonRemove($event) {\r\n\t\t// console.log('onRemove', $event);\r\n\t\tthis.remove.next($event);\r\n\t}\r\n\r\n}\r\n\r\nTodoItemComponent.meta = {\r\n\tselector: '[todo-item-component]',\r\n\tinputs: ['item'],\r\n\toutputs: ['toggle', 'remove'],\r\n\t// template syntax example\r\n\t/*\r\n\ttemplate: // html // `\r\n\t\t<div class=\"content\" [style]=\"{ background: background, color: foreground, '--accent': accent }\">\r\n\t\t\t<button type=\"button\" class=\"btn--toggle\" (click)=\"onToggle(item)\">\r\n\t\t\t\t<div class=\"title\" [innerHTML]=\"item.name\"></div>\r\n\t\t\t\t<div class=\"date\" [innerHTML]=\"item.date | date : 'en-US' : { month: 'short', day: '2-digit', year: 'numeric' }\"></div>\r\n\t\t\t</button>\r\n\t\t\t<button type=\"button\" class=\"btn--remove\" (click)=\"onRemove(item)\">\r\n\t\t\t\t<i class=\"icon--remove\"></i>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t`,\r\n\t*/\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport AppComponent from './app.component';\r\nimport DatePipe from './date/date.pipe';\r\nimport TodoItemComponent from './todo-item/todo-item.component';\r\n\r\nexport default class AppModule extends Module {}\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule\r\n\t],\r\n\tdeclarations: [\r\n\t\tTodoItemComponent,\r\n\t\tDatePipe,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}