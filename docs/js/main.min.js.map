{"version":3,"sources":["docs/js/main.js","../../src/js/local-storage/local-storage.service.js","../../src/js/store/store.service.js","../../src/js/app.component.js","../../src/js/date/date.pipe.js","../../src/js/colors/colors.js","../../src/js/todo-item/todo-item.component.js","../../src/js/main.js"],"names":["global","factory","exports","module","require","define","amd","self","rxcomp","rxjs","operators","this","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","LocalStorageService","delete","name","isLocalStorageSupported","window","localStorage","removeItem","exist","undefined","get","value","JSON","parse","e","console","log","set","cache","json","stringify","key","indexOf","push","setItem","supported","StoreService","items","get$","next","store$","id","date","Date","now","BehaviorSubject","pipe","delay","add$","patch","item","assign","getValue","unshift","of","patch$","find","x","delete$","index","splice","AppComponent","_Component","apply","arguments","_proto","onInit","_this","context","Module","getContext","input","node","querySelector","takeUntil","unsubscribe$","subscribe","pushChanges","onView","onInput","$event","onAddItem","_this2","onToggleItem","done","onRemoveItem","Component","meta","selector","DatePipe","transform","locale","options","dateStyle","timeStyle","toLocaleDateString","colors","hex","color","alpha","length","a","r","parseInt","slice","g","b","TodoItemComponent","onChanges","changes","backgroundColor","onToggle","toggle","onRemove","remove","inputs","outputs","use","factories","ClassDirective","EventDirective","ForStructure","IfStructure","InnerHtmlDirective","StyleDirective","pipes","JsonPipe","bootstrap"],"mappings":"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","file":"docs/js/main.min.js","sourcesContent":[null,"export default class LocalStorageService {\n\n\tstatic delete(name) {\n\t\tif (this.isLocalStorageSupported()) {\n\t\t\twindow.localStorage.removeItem(name);\n\t\t}\n\t}\n\n\tstatic exist(name) {\n\t\tif (this.isLocalStorageSupported()) {\n\t\t\treturn window.localStorage[name] !== undefined;\n\t\t}\n\t}\n\n\tstatic get(name) {\n\t\tlet value = null;\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tstatic set(name, value) {\n\t\tif (this.isLocalStorageSupported()) {\n\t\t\ttry {\n\t\t\t\tconst cache = [];\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t\t// Circular reference found, discard key\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t\twindow.localStorage.setItem(name, json);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic isLocalStorageSupported() {\n\t\tif (this.supported) {\n\t\t\treturn true;\n\t\t}\n\t\tlet supported = false;\n\t\ttry {\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\tif (supported) {\n\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t} else {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsupported = false;\n\t\t}\n\t\tthis.supported = supported;\n\t\treturn supported;\n\t}\n\n}\n","import { BehaviorSubject, of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nimport LocalStorageService from '../local-storage/local-storage.service';\n\nexport default class StoreService {\n\n\tstatic set(items) {\n\t\tLocalStorageService.set('items', items);\n\t\treturn this.get$().next(items);\n\t}\n\n\tstatic get$() {\n\t\tif (this.store$) {\n\t\t\treturn this.store$;\n\t\t}\n\t\tlet items = LocalStorageService.get('items');\n\t\tif (!items) {\n\t\t\titems = [\n\t\t\t\t{ id: 3, name: 'cookies', date: new Date(Date.now()) },\n\t\t\t\t{ id: 2, name: 'pizza', date: new Date(2019, 3, 22, 12) },\n\t\t\t\t{ id: 1, name: 'bread', date: new Date(2019, 0, 6, 12) },\n\t\t\t];\n\t\t\tLocalStorageService.set('items', items);\n\t\t}\n\t\tthis.store$ = new BehaviorSubject(items);\n\t\treturn this.store$.pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n\tstatic add$(patch) {\n\t\tconst item = Object.assign({\n\t\t\tid: Date.now(),\n\t\t\tdate: new Date(Date.now())\n\t\t}, patch);\n\t\tconst items = this.store$.getValue();\n\t\titems.unshift(item);\n\t\tthis.set(items);\n\t\treturn of(item).pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n\tstatic patch$(patch) {\n\t\tconst items = this.store$.getValue();\n\t\tconst item = items.find(x => x.id === patch.id);\n\t\tif (item) {\n\t\t\tObject.assign(item, patch);\n\t\t\tthis.set(items);\n\t\t}\n\t\treturn of(item).pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n\tstatic delete$(item) {\n\t\tconst items = this.store$.getValue();\n\t\tconst index = items.indexOf(item);\n\t\tif (index !== -1) {\n\t\t\titems.splice(index, 1);\n\t\t\tthis.set(items);\n\t\t}\n\t\treturn of(item).pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n}\n","import { Component, Module } from 'rxcomp';\nimport { takeUntil } from 'rxjs/operators';\nimport StoreService from './store/store.service';\n\nexport default class AppComponent extends Component {\n\n\tonInit() {\n\t\t// context\n\t\tconst context = Module.getContext(this);\n\t\t// input\n\t\tthis.input = context.node.querySelector('.control--text');\n\t\t// items\n\t\tthis.items = [];\n\t\t// store service\n\t\tthis.store$ = StoreService.get$();\n\t\tthis.store$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(items => {\n\t\t\tthis.items = items;\n\t\t\t// onpush change detection strategy\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonView() {\n\t\tconst context = Module.getContext(this);\n\t\t// console.log('AppComponent.onView', context.node);\n\t}\n\n\t// onChanges() {}\n\n\t// onDestroy() {}\n\n\tonInput($event) {\n\t\t// console.log('AppComponent.onInput', $event, this);\n\t\tthis.pushChanges();\n\t}\n\n\tonAddItem($event) {\n\t\tif (this.input.value) {\n\t\t\tStoreService.add$({\n\t\t\t\tname: this.input.value,\n\t\t\t}).subscribe(item => {\n\t\t\t\t// console.log('AppComponent.onAddItem', item);\n\t\t\t\tthis.input.value = null;\n\t\t\t});\n\t\t}\n\t}\n\n\tonToggleItem(item) {\n\t\tStoreService.patch$({\n\t\t\tid: item.id,\n\t\t\tdone: !item.done,\n\t\t}).subscribe(item => {\n\t\t\t// console.log('AppComponent.onToggleItem', item);\n\t\t});\n\t}\n\n\tonRemoveItem(item) {\n\t\tStoreService.delete$(item).subscribe(item => {\n\t\t\t// console.log('AppComponent.onRemoveItem', item);\n\t\t});\n\t}\n\n}\n\nAppComponent.meta = {\n\tselector: '[app-component]',\n};\n","export default class DatePipe {\n\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\n\t\tdateStyle: 'short',\n\t\ttimeStyle: 'short',\n\t}) {\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\n\t\treturn localeDateString;\n\t}\n\n}\n\nDatePipe.meta = {\n\tname: 'date',\n};\n","export const colors = [\n\t{ hex: '#073B4C' },\n\t{ hex: '#EF476F' },\n\t{ hex: '#1CCC9D' },\n\t{ hex: '#118AB2' },\n\t{ hex: '#EFC156' },\n];\n\nexport function hexToInt(hex) {\n\treturn parseInt(hex.replace(/^#/, ''), 16);\n}\n\nexport function randomHex() {\n\treturn colors[Math.floor(Math.random() * colors.length)].hex;\n}\n\nexport function randomColor() {\n\tconst hex = randomHex();\n\treturn hexToInt(hex);\n}\n\nexport function color(index, alpha) {\n\treturn hexToRgb(colors[index % colors.length].hex, alpha);\n}\n\nlet index = -1;\n\nexport function nextHex() {\n\tindex++;\n\treturn colors[index % colors.length].hex;\n}\n\nexport function nextColor() {\n\tconst hex = nextHex();\n\treturn hexToInt(hex);\n}\n\nexport function hexToRgb(hex, a) {\n\tconst r = parseInt(hex.slice(1, 3), 16);\n\tconst g = parseInt(hex.slice(3, 5), 16);\n\tconst b = parseInt(hex.slice(5, 7), 16);\n\tif (a) {\n\t\treturn `rgba(${r},${g},${b},${a})`;\n\t} else {\n\t\treturn `rgb(${r},${g},${b})`;\n\t}\n}\n","import { Component } from 'rxcomp';\nimport { color } from '../colors/colors';\n\nexport default class TodoItemComponent extends Component {\n\n\t// onInit() {}\n\n\tonChanges(changes) {\n\t\t// console.log('onChanges', changes);\n\t\tthis.backgroundColor = color(this.item.id, 0.15);\n\t\tthis.color = color(this.item.id);\n\t}\n\n\t// onView() {}\n\n\t// onDestroy() {}\n\n\tonToggle($event) {\n\t\t// console.log('onToggle', $event);\n\t\tthis.toggle.next($event);\n\t}\n\n\tonRemove($event) {\n\t\t// console.log('onRemove', $event);\n\t\tthis.remove.next($event);\n\t}\n\n}\n\nTodoItemComponent.meta = {\n\tselector: '[todo-item-component]',\n\tinputs: ['item'],\n\toutputs: ['toggle', 'remove'],\n\t// template syntax example\n\t/*\n\ttemplate: // html // `\n\t\t<button type=\"button\" class=\"btn--toggle\" [style]=\"{ color: color }\" (click)=\"onToggle(item)\">\n\t\t\t<i class=\"icon--check\" *if=\"item.done\"></i>\n\t\t\t<i class=\"icon--circle\" *if=\"!item.done\"></i>\n\t\t</button>\n\t\t<div class=\"title\" [style]=\"{ color: color }\" [innerHTML]=\"item.name\"></div>\n\t\t<div class=\"date\" [style]=\"{ background: backgroundColor, color: color }\" [innerHTML]=\"item.date | date : 'en-US' : { month: 'short', day: '2-digit', year: 'numeric' }\"></div>\n\t\t<button type=\"button\" class=\"btn--remove\" [style]=\"{ color: color }\" (click)=\"onRemove(item)\"><i class=\"icon--remove\"></i></button>\n\t`,\n\t*/\n};\n","import { ClassDirective, EventDirective, ForStructure, IfStructure, InnerHtmlDirective, JsonPipe, Module, StyleDirective } from 'rxcomp';\nimport AppComponent from './app.component';\nimport DatePipe from './date/date.pipe';\nimport TodoItemComponent from './todo-item/todo-item.component';\n\nModule.use({\n\tfactories: [\n\t\tClassDirective,\n\t\tEventDirective,\n\t\tForStructure,\n\t\tIfStructure,\n\t\tInnerHtmlDirective,\n\t\tStyleDirective,\n\t\tTodoItemComponent,\n\t],\n\tpipes: [\n\t\tDatePipe,\n\t\tJsonPipe,\n\t],\n\tbootstrap: AppComponent,\n});\n"]}