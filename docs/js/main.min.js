/**
 * @license todomvc v1.0.0-alpha.3
 * (c) 2019 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("rxcomp"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("main",["rxcomp","rxjs/operators","rxjs"],e):e((t=t||self).rxcomp,t.rxjs.operators,t.rxjs)}(this,(function(t,e,o){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=function(){function t(){}return t.delete=function(t){this.isLocalStorageSupported()&&window.localStorage.removeItem(t)},t.exist=function(t){if(this.isLocalStorageSupported())return void 0!==window.localStorage[t]},t.get=function(t){var e=null;if(this.isLocalStorageSupported()&&void 0!==window.localStorage[t])try{e=JSON.parse(window.localStorage[t])}catch(e){console.log("LocalStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isLocalStorageSupported())try{var o=[],n=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(-1!==o.indexOf(e))return;o.push(e)}return e}));window.localStorage.setItem(t,n)}catch(o){console.log("LocalStorageService.set.error serializing",t,e,o)}},t.isLocalStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="localStorage"in window&&null!==window.localStorage)?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t}(),r=function(){function t(){}return t.set=function(t){return i.set("items",t),this.get$().next(t)},t.get$=function(){if(this.store$)return this.store$;var t=i.get("items");return t||(t=[{id:3,name:"cookies",date:new Date(Date.now())},{id:2,name:"pizza",date:new Date(2019,3,22,12)},{id:1,name:"bread",date:new Date(2019,0,6,12)}],i.set("items",t)),this.store$=new o.BehaviorSubject(t),this.store$.pipe(e.delay(1))},t.add$=function(t){var n=Object.assign({id:Date.now(),date:new Date(Date.now())},t),i=this.store$.getValue();return i.unshift(n),this.set(i),o.of(n).pipe(e.delay(1))},t.patch$=function(t){var n=this.store$.getValue(),i=n.find((function(e){return e.id===t.id}));return i&&(Object.assign(i,t),this.set(n)),o.of(i).pipe(e.delay(1))},t.delete$=function(t){var n=this.store$.getValue(),i=n.indexOf(t);return-1!==i&&(n.splice(i,1),this.set(n)),o.of(t).pipe(e.delay(1))},t}(),s=function(o){function i(){return o.apply(this,arguments)||this}n(i,o);var s=i.prototype;return s.onInit=function(){var o=this,n=t.Module.getContext(this);this.input=n.node.querySelector(".control--text"),this.items=[],this.store$=r.get$(),this.store$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(t){o.items=t,o.pushChanges()}))},s.onView=function(){t.Module.getContext(this)},s.onInput=function(t){this.pushChanges()},s.onAddItem=function(t){var e=this;this.input.value&&r.add$({name:this.input.value}).subscribe((function(t){e.input.value=null}))},s.onToggleItem=function(t){r.patch$({id:t.id,done:!t.done}).subscribe((function(t){}))},s.onRemoveItem=function(t){r.delete$(t).subscribe((function(t){}))},i}(t.Component);s.meta={selector:"[app-component]"};var a=function(){function t(){}return t.transform=function(t,e,o){return void 0===e&&(e="it-IT-u-ca-gregory"),void 0===o&&(o={dateStyle:"short",timeStyle:"short"}),new Date(t).toLocaleDateString(e,o)},t}();a.meta={name:"date"};var u=[{hex:"#073B4C"},{hex:"#EF476F"},{hex:"#1CCC9D"},{hex:"#118AB2"},{hex:"#EFC156"}];function c(t,e){return o=u[t%u.length].hex,n=e,i=parseInt(o.slice(1,3),16),r=parseInt(o.slice(3,5),16),s=parseInt(o.slice(5,7),16),n?"rgba("+i+","+r+","+s+","+n+")":"rgb("+i+","+r+","+s+")";var o,n,i,r,s}var l=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.onChanges=function(t){this.backgroundColor=c(this.item.id,.15),this.color=c(this.item.id)},o.onToggle=function(t){this.toggle.next(t)},o.onRemove=function(t){this.remove.next(t)},e}(t.Component);l.meta={selector:"[todo-item-component]",inputs:["item"],outputs:["toggle","remove"]},t.Module.use({factories:[t.ClassDirective,t.EventDirective,t.ForStructure,t.IfStructure,t.InnerHtmlDirective,t.StyleDirective,l],pipes:[a,t.JsonPipe],bootstrap:s})}));
//# sourceMappingURL=main.min.js.map