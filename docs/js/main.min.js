/**
 * @license todomvc v1.0.0-alpha.4
 * (c) 2019 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("rxcomp"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("main",["rxcomp","rxjs/operators","rxjs"],e):e((t=t||self).rxcomp,t.rxjs.operators,t.rxjs)}(this,(function(t,e,n){"use strict";function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r=[{hex:"#ffffff",background:"#ffffff",foreground:"#003adc",accent:"#212121"},{hex:"#212121",background:"#212121",foreground:"#ffffff",accent:"#003adc"},{hex:"#ffffff",background:"#ffffff",foreground:"#212121",accent:"#003adc"},{hex:"#003adc",background:"#003adc",foreground:"#ffffff",accent:"#212121"}];function i(t,e){return s(r[t%r.length].hex,e)}function c(t,e){return console.log(t),s(r[t%r.length].background,e)}function a(t,e){return s(r[t%r.length].foreground,e)}function u(t,e){return s(r[t%r.length].accent,e)}function s(t,e){var n=parseInt(t.slice(1,3),16),o=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return e?"rgba("+n+","+o+","+r+","+e+")":"rgb("+n+","+o+","+r+")"}var f=function(){function t(){}return t.delete=function(t){this.isLocalStorageSupported()&&window.localStorage.removeItem(t)},t.exist=function(t){if(this.isLocalStorageSupported())return void 0!==window.localStorage[t]},t.get=function(t){var e=null;if(this.isLocalStorageSupported()&&void 0!==window.localStorage[t])try{e=JSON.parse(window.localStorage[t])}catch(e){console.log("LocalStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isLocalStorageSupported())try{var n=[],o=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e}));window.localStorage.setItem(t,o)}catch(n){console.log("LocalStorageService.set.error serializing",t,e,n)}},t.isLocalStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="localStorage"in window&&null!==window.localStorage)?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t}(),d=function(){function t(){}return t.set=function(t){return f.set("items",t),this.get$().next(t)},t.get$=function(){if(this.store$)return this.store$;var t=f.get("items");return t||(t=[{id:3,name:"cookies",date:new Date(Date.now())},{id:2,name:"pizza",date:new Date(2019,3,22,12)},{id:1,name:"bread",date:new Date(2019,0,6,12)}],f.set("items",t)),this.store$=new n.BehaviorSubject(t),this.store$.pipe(e.delay(1),e.map((function(t){return t.forEach((function(e,n){var o=t.length-1-n;e.background=c(o),e.foreground=a(o),e.accent=u(o)})),t})))},t.add$=function(t){var o=Object.assign({id:Date.now(),date:new Date(Date.now())},t),r=this.store$.getValue();return r.unshift(o),this.set(r),n.of(o).pipe(e.delay(1))},t.patch$=function(t){var o=this.store$.getValue(),r=o.find((function(e){return e.id===t.id}));return r&&(Object.assign(r,t),this.set(o)),n.of(r).pipe(e.delay(1))},t.delete$=function(t){var o=this.store$.getValue(),r=o.indexOf(t);return-1!==r&&(o.splice(r,1),this.set(o)),n.of(t).pipe(e.delay(1))},t}(),l=function(n){function r(){return n.apply(this,arguments)||this}o(r,n);var i=r.prototype;return i.onInit=function(){var n=this,o=t.Module.getContext(this);this.input=o.node.querySelector(".control--text"),this.items=[],this.store$=d.get$(),this.store$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(t){n.items=t,n.pushChanges()}))},i.onView=function(){t.Module.getContext(this)},i.onInput=function(t){this.pushChanges()},i.onAddItem=function(t){var e=this;this.input.value&&d.add$({name:this.input.value}).subscribe((function(t){e.input.value=null}))},i.onToggleItem=function(t){d.patch$({id:t.id,done:!t.done}).subscribe((function(t){}))},i.onRemoveItem=function(t){d.delete$(t).subscribe((function(t){}))},r}(t.Component);l.meta={selector:"[app-component]"};var p=function(){function t(){}return t.transform=function(t,e,n){return void 0===e&&(e="it-IT-u-ca-gregory"),void 0===n&&(n={dateStyle:"short",timeStyle:"short"}),new Date(t).toLocaleDateString(e,n)},t}();p.meta={name:"date"};var g=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.onChanges=function(t){this.backgroundColor=i(this.item.id,.15),this.color=i(this.item.id),this.background=c(t.index),this.foreground=a(t.index),this.accent=u(t.index)},n.onToggle=function(t){this.toggle.next(t)},n.onRemove=function(t){this.remove.next(t)},e}(t.Component);g.meta={selector:"[todo-item-component]",inputs:["item"],outputs:["toggle","remove"]},t.Module.use({factories:[t.ClassDirective,t.EventDirective,t.ForStructure,t.IfStructure,t.InnerHtmlDirective,t.StyleDirective,g],pipes:[p,t.JsonPipe],bootstrap:l})}));
//# sourceMappingURL=main.min.js.map